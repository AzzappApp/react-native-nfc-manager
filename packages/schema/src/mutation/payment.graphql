extend type Mutation {
  estimateSubscriptionCost(
    totalSeats: Int!
    plan: PaymentPlan!
    countryCode: String
    vatNumber: String
  ): SubscriptionEstimation!
  estimateUpdateSubscriptionCost(
    webCardId: ID!
    subscriptionId: ID!
    totalSeats: Int!
  ): UpdateSubscriptionEstimation!
  createPaymentIntent(
    webCardId: ID!
    intent: PaymentIntentInput!
  ): PaymentIntentPayload!
  createSubscriptionFromPaymentMean(
    webCardId: ID!
    paymentMeanId: ID!
    intent: PaymentIntentInput!
  ): UserSubscription!
  updateSubscription(
    webCardId: ID!
    subscriptionId: ID!
    totalSeats: Int
    paymentMeanId: ID
  ): UserSubscription!
  createPaymentMean(
    webCardId: ID!
    locale: String!
    redirectUrlSuccess: String!
    redirectUrlCancel: String!
    customer: Customer!
  ): String!
  generatePaymentInvoice(webCardId: ID!, paymentId: ID!): String!
  upgradeSubscriptionPlan(
    webCardId: ID!
    subscriptionId: ID!
  ): UserSubscription!
  endSubscription(webCardId: ID!, subscriptionId: ID!): UserSubscription!
  updateSubscriptionCustomer(
    webCardId: ID!
    subscriptionId: ID!
    customer: Customer!
  ): UserSubscription!
  renewSubscription(webCardId: ID!, subscriptionId: ID!): UserSubscription!
}

enum PaymentPlan {
  monthly
  yearly
}

input PaymentIntentInput {
  totalSeats: Int!
  locale: String!
  plan: PaymentPlan!
  customer: Customer!
  redirectUrlSuccess: String!
  redirectUrlCancel: String!
}

input Customer {
  email: String!
  name: String!
  phone: String
  address: String!
  city: String!
  zip: String!
  country: String!
  countryCode: String!
  vatNumber: String
}

type PaymentIntentPayload {
  clientRedirectUrl: String!
  amount: Int!
  taxes: Int!
}

type UpdateSubscriptionEstimation {
  firstPayment: SubscriptionEstimation
  recurringCost: SubscriptionEstimation!
}

type SubscriptionEstimation {
  """
  The estimated amout of the subscription in cents
  """
  amount: Int!
  """
  The estimated taxes of the subscription in cents
  """
  taxes: Int!
  """
  The applied rate
  """
  taxRate: Float!
}
